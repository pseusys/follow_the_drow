name: REPORT

on:
  push:
    paths:
      - 'report/**'
      - '.github/workflows/build_report.yml'

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: ${{ github.ref != 'refs/heads/main' }}

jobs:
  generate-report:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout repository ğŸ›ï¸
        uses: actions/checkout@v4
      
      - name: Pull LaTeX builder image ğŸ–¼ï¸
        run: docker pull blang/latex

      - name: Build Report ğŸ“
        run: docker run --rm -i --user="$(id -u):$(id -g)" -v "$PWD/report:/data" blang/latex pdflatex main.tex

      - name: Update release ğŸ“©
        uses: svenstaro/upload-release-action@v2
        with:
          file_glob: true
          overwrite: true
          tag: report
          file: report/main.pdf
